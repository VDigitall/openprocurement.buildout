[circus]
check_delay = 5
endpoint = {{endpoint}}
pubsub_endpoint = {{pubsub_endpoint}}
umask = 002
logoutput = {{ parts.buildout.directory }}/var/log/circus.log

[watcher:db]
cmd = couchdb
args = -a {{ parts.buildout.directory }}/etc/couchdb.ini
stdout_stream.class = FileStream
stdout_stream.filename = {{ parts.buildout.directory }}/var/log/couchdb.stdout.log
stdout_stream.max_bytes = 134217728
stdout_stream.backup_count = 1
stderr_stream.class = FileStream
stderr_stream.filename = {{ parts.buildout.directory }}/var/log/couchdb.stderr.log
stderr_stream.max_bytes = 134217728
stderr_stream.backup_count = 1

[env:db]
HOME = {{ parts.buildout.directory }}/var

{% if statsd == 'True' %}
[plugin:statsd]
use = circus.plugins.statsd.StatsdEmitter
host = localhost
port = 8125
sample_rate = 1.0
application_name = {{ app_key }}
{% endif %}

{% if parts.project.with_penstock %}
[watcher:penstock]
cmd = {{ parts.buildout.directory }}/bin/penstock_with_init
shell = True
copy_env = True
stdout_stream.class = FileStream
stdout_stream.filename = {{ parts.buildout.directory }}/var/log/penstock.stdout.log
stdout_stream.max_bytes = 134217728
stdout_stream.backup_count = 1
stderr_stream.class = FileStream
stderr_stream.filename = {{ parts.buildout.directory }}/var/log/penstock.stderr.log
stderr_stream.max_bytes = 134217728
stderr_stream.backup_count = 1
{% endif %}

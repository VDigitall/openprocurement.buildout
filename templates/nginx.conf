daemon off;
worker_processes  1;

events {
    worker_connections  1024;
    use epoll;
}

error_log       {{ parts['buildout'].directory }}/var/log/nginx/error.log;
pid  {{ parts['buildout'].directory }}/var/nginx.pid;


http {
    client_body_temp_path /tmp/client_body;
    fastcgi_temp_path /tmp/fastcgi_temp;
    proxy_temp_path /tmp/proxy_temp;
    scgi_temp_path /tmp/scgi_temp;
    uwsgi_temp_path /tmp/uwsgi_temp;
    default_type  application/octet-stream;

    # include /etc/nginx/mime.types;

    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
    '$status $body_bytes_sent "$http_referer" '
    '"$http_user_agent" "$http_x_forwarded_for"';

    sendfile            on;
    tcp_nopush          on;
    tcp_nodelay         on;
    keepalive_timeout   65;
    types_hash_max_size 2048;

    gzip  on;

    gzip_comp_level 2;
    gzip_proxied    any;
    gzip_types      text/plain text/css application/x-javascript text/xml application/xml application/xml+rss text/javascript;


    server {
        listen       {{ port }};
        server_name  {{ server_name }};
        error_log       {{ parts['buildout'].directory }}/var/log/nginx/error.log;
        access_log       {{ parts['buildout'].directory }}/var/log/nginx/access.log;

        proxy_set_header X-Real-IP  $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto http;
        proxy_set_header Host $host;
        proxy_set_header Authorization  "";

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/qualifications/(?<qualification_id>[0-9a-zA-Z]+)/complaints/(?<complaint_id>[0-9a-zA-Z]+)/documents/(?<document_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?qualification_id=$qualification_id&q_complaint_id=$complaint_id&document_id=$document_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/awards/(?<award_id>[0-9a-zA-Z]+)/complaints/(?<complaint_id>[0-9a-zA-Z]+)/documents/(?<document_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?award_id=$award_id&complaint_id=$complaint_id&document_id=$document_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/auctions/(?<auction_id>[0-9a-zA-Z]+)/awards/(?<award_id>[0-9a-zA-Z]+)/complaints/(?<complaint_id>[0-9a-zA-Z]+)/documents/(?<document_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/auctions/_show/show/$auction_id?award_id=$award_id&complaint_id=$complaint_id&document_id=$document_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/qualifications/(?<qualification_id>[0-9a-zA-Z]+)/complaints/(?<complaint_id>[0-9a-zA-Z]+)/documents {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?qualification_id=$qualification_id&q_complaint_id=$complaint_id&document_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/awards/(?<award_id>[0-9a-zA-Z]+)/complaints/(?<complaint_id>[0-9a-zA-Z]+)/documents {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?award_id=$award_id&complaint_id=$complaint_id&document_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/auctions/(?<auction_id>[0-9a-zA-Z]+)/awards/(?<award_id>[0-9a-zA-Z]+)/complaints/(?<complaint_id>[0-9a-zA-Z]+)/documents {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/auctions/_show/show/$auction_id?award_id=$award_id&complaint_id=$complaint_id&document_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/awards/(?<award_id>[0-9a-zA-Z]+)/documents/(?<document_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?award_id=$award_id&document_id=$document_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/auctions/(?<auction_id>[0-9a-zA-Z]+)/awards/(?<award_id>[0-9a-zA-Z]+)/complaints/(?<complaint_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/auctions/_show/show/$auction_id?award_id=$award_id&complaint_id=$complaint_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/awards/(?<award_id>[0-9a-zA-Z]+)/complaints/(?<complaint_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?award_id=$award_id&complaint_id=$complaint_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/bids/(?<bid_id>[0-9a-zA-Z]+)/qualification_documents/(?<document_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?bid_id=$bid_id&qualification_document=$document_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/bids/(?<bid_id>[0-9a-zA-Z]+)/financial_documents/(?<document_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?bid_id=$bid_id&financial_document=$document_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/bids/(?<bid_id>[0-9a-zA-Z]+)/eligibility_documents/(?<document_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?bid_id=$bid_id&eligibility_document=$document_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/bids/(?<bid_id>[0-9a-zA-Z]+)/documents/(?<document_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?bid_id=$bid_id&document_id=$document_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/cancellations/(?<cancellation_id>[0-9a-zA-Z]+)/documents/(?<document_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?cancellation_id=$cancellation_id&document_id=$document_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/qualifications/(?<qualification_id>[0-9a-zA-Z]+)/complaints/(?<complaint_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?qualification_id=$qualification_id&q_complaint_id=$complaint_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/qualifications/(?<qualification_id>[0-9a-zA-Z]+)/documents/(?<document_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?qualification_id=$qualification_id&document_id=$document_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/complaints/(?<complaint_id>[0-9a-zA-Z]+)/documents/(?<document_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?complaint_id=$complaint_id&document_id=$document_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/contracts/(?<contract_id>[0-9a-zA-Z]+)/documents/(?<document_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?contract_id=$contract_id&document_id=$document_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/auctions/(?<auction_id>[0-9a-zA-Z]+)/awards/(?<award_id>[0-9a-zA-Z]+)/documents/(?<document_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/auctions/_show/show/$auction_id?award_id=$award_id&document_id=$document_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/auctions/(?<auction_id>[0-9a-zA-Z]+)/bids/(?<bid_id>[0-9a-zA-Z]+)/documents/(?<document_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/auctions/_show/show/$auction_id?bid_id=$bid_id&document_id=$document_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/auctions/(?<auction_id>[0-9a-zA-Z]+)/cancellations/(?<cancellation_id>[0-9a-zA-Z]+)/documents/(?<document_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/auctions/_show/show/$auction_id?cancellation_id=$cancellation_id&document_id=$document_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/auctions/(?<auction_id>[0-9a-zA-Z]+)/complaints/(?<complaint_id>[0-9a-zA-Z]+)/documents/(?<document_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/auctions/_show/show/$auction_id?complaint_id=$complaint_id&document_id=$document_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/auctions/(?<auction_id>[0-9a-zA-Z]+)/contracts/(?<contract_id>[0-9a-zA-Z]+)/documents/(?<document_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/auctions/_show/show/$auction_id?contract_id=$contract_id&document_id=$document_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/auctions/(?<auction_id>[0-9a-zA-Z]+)/awards/(?<award_id>[0-9a-zA-Z]+)/complaints {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/auctions/_show/show/$auction_id?award_id=$award_id&complaint_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/auctions/(?<auction_id>[0-9a-zA-Z]+)/awards/(?<award_id>[0-9a-zA-Z]+)/documents {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/auctions/_show/show/$auction_id?award_id=$award_id&document_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/auctions/(?<auction_id>[0-9a-zA-Z]+)/bids/(?<bid_id>[0-9a-zA-Z]+)/documents {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/auctions/_show/show/$auction_id?bid_id=$bid_id&document_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/auctions/(?<auction_id>[0-9a-zA-Z]+)/cancellations/(?<cancellation_id>[0-9a-zA-Z]+)/documents {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/auctions/_show/show/$auction_id?cancellation_id=$cancellation_id&document_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/auctions/(?<auction_id>[0-9a-zA-Z]+)/complaints/(?<complaint_id>[0-9a-zA-Z]+)/documents {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/auctions/_show/show/$auction_id?complaint_id=$complaint_id&document_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/auctions/(?<auction_id>[0-9a-zA-Z]+)/contracts/(?<contract_id>[0-9a-zA-Z]+)/documents {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/auctions/_show/show/$auction_id?contract_id=$contract_id&document_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/awards/(?<award_id>[0-9a-zA-Z]+)/documents {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?award_id=$award_id&document_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/awards/(?<award_id>[0-9a-zA-Z]+)/complaints {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?award_id=$award_id&complaint_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/bids/(?<bid_id>[0-9a-zA-Z]+)/qualification_documents {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?bid_id=$bid_id&qualification_document=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/bids/(?<bid_id>[0-9a-zA-Z]+)/financial_documents {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?bid_id=$bid_id&financial_document=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/bids/(?<bid_id>[0-9a-zA-Z]+)/eligibility_documents {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?bid_id=$bid_id&eligibility_document=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/bids/(?<bid_id>[0-9a-zA-Z]+)/documents {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?bid_id=$bid_id&document_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/cancellations/(?<cancellation_id>[0-9a-zA-Z]+)/documents {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?cancellation_id=$cancellation_id&document_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/qualifications/(?<qualification_id>[0-9a-zA-Z]+)/complaints {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?qualification_id=$qualification_id&q_complaint_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/qualifications/(?<qualification_id>[0-9a-zA-Z]+)/documents {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?qualification_id=$qualification_id&document_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/complaints/(?<complaint_id>[0-9a-zA-Z]+)/documents {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?complaint_id=$complaint_id&document_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/contracts/(?<contract_id>[0-9a-zA-Z]+)/documents {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?contract_id=$contract_id&document_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/contracts/(?<contract_id>[0-9a-zA-Z]+)/documents/(?<document_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/contracts/_show/show/$contract_id?document_id=$document_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/plans/(?<plan_id>[0-9a-zA-Z]+)/documents/(?<document_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/plans/_show/show/$plan_id?document_id=$document_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/auctions/(?<auction_id>[0-9a-zA-Z]+)/awards/(?<award_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/auctions/_show/show/$auction_id?award_id=$award_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/auctions/(?<auction_id>[0-9a-zA-Z]+)/bids/(?<bid_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/auctions/_show/show/$auction_id?bid_id=$bid_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/auctions/(?<auction_id>[0-9a-zA-Z]+)/cancellations/(?<cancellation_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/auctions/_show/show/$auction_id?cancellation_id=$cancellation_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/auctions/(?<auction_id>[0-9a-zA-Z]+)/complaints/(?<complaint_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/auctions/_show/show/$auction_id?complaint_id=$complaint_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/auctions/(?<auction_id>[0-9a-zA-Z]+)/contracts/(?<contract_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/auctions/_show/show/$auction_id?contract_id=$contract_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/auctions/(?<auction_id>[0-9a-zA-Z]+)/documents/(?<document_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/auctions/_show/show/$auction_id?document_id=$document_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/auctions/(?<auction_id>[0-9a-zA-Z]+)/lots/(?<lot_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/auctions/_show/show/$auction_id?lot_id=$lot_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/auctions/(?<auction_id>[0-9a-zA-Z]+)/questions/(?<question_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/auctions/_show/show/$auction_id?question_id=$question_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/contracts/(?<contract_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?contract_id=$contract_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/awards/(?<award_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?award_id=$award_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/bids/(?<bid_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?bid_id=$bid_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/cancellations/(?<cancellation_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?cancellation_id=$cancellation_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/qualifications/(?<qualification_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?qualification_id=$qualification_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/complaints/(?<complaint_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?complaint_id=$complaint_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/documents/(?<document_id>[0-9a-zA-Z]+) {
            proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?document_id=$document_id;
            proxy_hide_header Content-Type;
            add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/lots/(?<lot_id>[0-9a-zA-Z]+) {
            proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?lot_id=$lot_id;
            proxy_hide_header Content-Type;
            add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/questions/(?<question_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?question_id=$question_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/auctions/(?<auction_id>[0-9a-zA-Z]+)/awards {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/auctions/_show/show/$auction_id?award_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/auctions/(?<auction_id>[0-9a-zA-Z]+)/bids {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/auctions/_show/show/$auction_id?bid_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/auctions/(?<auction_id>[0-9a-zA-Z]+)/cancellations {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/auctions/_show/show/$auction_id?cancellation_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/auctions/(?<auction_id>[0-9a-zA-Z]+)/complaints {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/auctions/_show/show/$auction_id?complaint_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/auctions/(?<auction_id>[0-9a-zA-Z]+)/contracts {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/auctions/_show/show/$auction_id?contract_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/auctions/(?<auction_id>[0-9a-zA-Z]+)/documents {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/auctions/_show/show/$auction_id?document_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/auctions/(?<auction_id>[0-9a-zA-Z]+)/lots {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/auctions/_show/show/$auction_id?lot_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/auctions/(?<auction_id>[0-9a-zA-Z]+)/questions {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/auctions/_show/show/$auction_id?question_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/contracts/(?<contract_id>[0-9a-zA-Z]+)/documents {
            proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/contracts/_show/show/$contract_id?document_id=*;
            proxy_hide_header Content-Type;
            add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/awards {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?award_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/bids {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?bid_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/cancellations {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?cancellation_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/qualifications {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?qualification_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/complaints {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?complaint_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/contracts {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?contract_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/documents {
            proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?document_id=*;
            proxy_hide_header Content-Type;
            add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/lots {
            proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?lot_id=*;
            proxy_hide_header Content-Type;
            add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+)/questions {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id?question_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/plans/(?<plan_id>[0-9a-zA-Z]+)/documents {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/plans/_show/show/$plan_id?document_id=*;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/plans/(?<plan_id>[0-9a-zA-Z]+){
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/plans/_show/show/$plan_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/tenders/(?<tender_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/tenders/_show/show/$tender_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/contracts/(?<contract_id>[0-9a-zA-Z]+){
        proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/contracts/_show/show/$contract_id;
        proxy_hide_header Content-Type;
        add_header Content-Type "application/json; charset=UTF-8";
        }

        location ~^/api/{{ api_version }}/auctions/(?<auction_id>[0-9a-zA-Z]+) {
          proxy_pass  http://{{ couchdb_host }}:{{ couchdb_port }}/{{ couchdb_db }}/_design/auctions/_show/show/$auction_id;
          proxy_hide_header Content-Type;
          add_header Content-Type "application/json; charset=UTF-8";
        }

        # Auctions feed
        location ~^/api/{{ api_version }}/auctions {
          proxy_pass  http://127.0.0.1:{{ edge_port }}/api/{{ api_version }}/auctions$is_args$args;
        }

        # Contracts feed
        # /api/{{ api_version }}/contracts
        location ~^/api/{{ api_version }}/contracts {
          proxy_pass  http://127.0.0.1:{{ edge_port }}/api/{{ api_version }}/contracts$is_args$args;
        }

        # Plans feed
        location ~^/api/{{ api_version }}/plans {
          proxy_pass  http://127.0.0.1:{{ edge_port }}/api/{{ api_version }}/plans$is_args$args;
        }

        # Tenders feed
        location ~^/api/{{ api_version }}/tenders {
          proxy_pass  http://127.0.0.1:{{ edge_port }}/api/{{ api_version }}/tenders$is_args$args;
        }

        location ~^/api/{{ api_version }}/spore {
            proxy_pass  http://127.0.0.1:{{ edge_port}}/api/{{ api_version }}/spore$is_args$args;
            proxy_hide_header Content-Type;
            add_header Content-Type "application/json; charset=UTF-8";
        }
    }
}